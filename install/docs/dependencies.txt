#!/bin/bash


# manually install cpanm

# TODO check for cpanm before this script runs.

# apt-get installs :

sudo apt-get update

sudo apt-get install -y make autoconf automake libtool

sudo apt-get install -y rrdtool vim git

sudo apt-get install -y  libsodium-dev libzmq3-dev

sudo apt-get install -y python-dev

# on piserver :
sudo apt-get install postgresql postgresql-contrib libpq-dev; sudo cpanm DBD::Pg

# on piserver with Dancer and apache app :
sudo apt-get install memcached

#on piboiler where heating daemon is :
sudo apt-get install postgresql-client libpq-dev ; sudo cpanm DBD::Pg


sudo apt-get install -y \
apache2 \
daemon \
i2c-tools \
perl-doc \
perl-modules \
python-pip \
python-rrdtool \
python-smbus \
python-yaml \
python-zmq \
screen \
vim \
git

sudo apt-get install -y apache2-utils apache2 daemon i2c-tools perl-doc perl-modules python-pip python-rrdtool python-smbus python-yaml python-zmq screen vim git

sudo apt-get install libapache2-mod-perl2 libapache2-mod-perl2-dev  libapache2-request-perl libdatetime-perl -y

# libzmq-dev \

#####################################

# pip installs :


# this doesn't work : sudo pip install python-yaml

sudo pip install pyzmq


#######################################
# cpanm installs

sudo cpanm Clone
sudo cpanm JSON
sudo cpanm AnyEvent
sudo cpanm ZMQ::LibZMQ3
sudo cpanm List::Compare
sudo cpanm Sub::Override
sudo cpanm Test::More
sudo cpanm Test::Exception
sudo cpanm Test::Deep

sudo cpanm Exception::Class

sudo cpanm Clone JSON AnyEvent ZMQ::LibZMQ3 List::Compare Sub::Override Test::More Test::Exception Test::Deep Exception::Class

sudo cpanm DateTime


# Only needed on DB / WebUI :
sudo cpanm Dancer2
sudo cpanm Dancer2::Plugin::Database
sudo cpanm Dancer2::Plugin::Auth::Tiny
sudo cpanm Dancer2::Session::Memcached
sudo cpanm Email::Send::Gmail   Email::Simple::Creator   Email::Send
# installing DBD::Pg needs a /tmp of at least 166M . Best go for 250M
sudo cpanm DBD::Pg

